environments:
  development:
    ios:
      bundleId: io.ionic.awesomeStarter
    android:
  prod:
    ios:
      bundleId: io.ionic.awesomeStarter

      entitlements:
        - keychain:
            [
              '$BUNDLE_ID',
              'com.microsoft.intune.mam',
              'com.microsoft.adalcache',
            ]
      frameworks:
        - AudioToolbox.framework
        - CoreServices.framework
        - ImageIO.framework
        - libc++.tbd
        - libqslite3.tbd
        - LocalAuthentication.framework
        - MessageUI.framework
        - QuartzCore.framework
        - Security.framework
        - SystemConfiguration.framework
        - WebKit.framework

    android:
      package: io.ionic.awesomeStarter
      build.gradle:
        buildscript:
          dependencies:
            - classpath: 'org.javassist:javassist:3.27.0-GA'
            - classpath: files("./app/src/main/libs/com.microsoft.intune.mam.build.jar")

      app.build.gradle:
        dependencies:
          - implementation: files("./src/main/libs/Microsoft.Intune.MAM.SDK.aar")
          - implementation: 'com.microsoft.identity.client:msal:1.5.5'

        apply plugin: 'com.microsoft.intune.mam'
        intunemam:
          includeExternalLibraries:
            - 'androidx.*'
            - 'com.getcapacitor.*'

      res:
        - path: raw
          file: auth_config.json
          text: |
            {
              "client_id": "f80e2e59-01b2-4f88-be80-4895a63eae7e",
              "authorization_user_agent": "DEFAULT",
              "redirect_uri": "msauth://io.ionic.starter/uHU%2BUi09K1zPjWX4mZFggrgz%2Brk%3D",
              "broker_redirect_uri_registered": true,
              "authorities": [
                {
                  "type": "AAD",
                  "audience": {
                    "type": "AzureADMyOrg",
                    "tenant_id": "453daf0a-cd18-4085-bfd7-fb9431630f11"
                  }
                }
              ]
            }
